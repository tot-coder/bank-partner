{
    "components": {"schemas":{"data":{"properties":{"data":{"properties":{"created_at":{"type":"string"},"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"string"},"last_name":{"type":"string"},"role":{"type":"string"}},"type":"object"}},"type":"object"},"github_com_array_banking-api_internal_dto.CreateAccountRequest":{"properties":{"accountType":{"enum":["checking","savings","money_market"],"type":"string"},"initialDeposit":{"type":"string"}},"required":["accountType"],"type":"object"},"github_com_array_banking-api_internal_dto.CreateAccountResponse":{"properties":{"account":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"message":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.CreateCustomerRequest":{"properties":{"address":{"maxLength":500,"type":"string"},"annualIncome":{"type":"string"},"city":{"maxLength":100,"type":"string"},"dateOfBirth":{"type":"string"},"email":{"type":"string"},"employmentStatus":{"enum":["employed","self_employed","unemployed","retired","student"],"type":"string"},"firstName":{"maxLength":100,"minLength":1,"type":"string"},"lastName":{"maxLength":100,"minLength":1,"type":"string"},"phoneNumber":{"type":"string"},"ssn":{"type":"string"},"state":{"type":"string"},"zipCode":{"type":"string"}},"required":["annualIncome","dateOfBirth","email","employmentStatus","firstName","lastName","ssn"],"type":"object"},"github_com_array_banking-api_internal_dto.CreateCustomerResponse":{"properties":{"customer":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.User"},"message":{"type":"string"},"temporaryPassword":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.CustomerSearchResult":{"properties":{"accountCount":{"type":"integer"},"createAt":{"type":"string"},"email":{"type":"string"},"firstName":{"type":"string"},"id":{"type":"string"},"lastLoginAt":{"type":"string"},"lastName":{"type":"string"},"status":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.DeleteCustomerResponse":{"properties":{"message":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.GetCustomerProfileResponse":{"properties":{"customer":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.User"}},"type":"object"},"github_com_array_banking-api_internal_dto.ListTransactionsResponse":{"properties":{"pagination":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.PaginationInfo"},"transactions":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransactionWithBalance"},"type":"array","uniqueItems":false}},"type":"object"},"github_com_array_banking-api_internal_dto.LoginRequest":{"properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"],"type":"object"},"github_com_array_banking-api_internal_dto.PaginationInfo":{"properties":{"hasMore":{"type":"boolean"},"limit":{"type":"integer"},"nextCursor":{"type":"string"},"total":{"type":"integer"}},"type":"object"},"github_com_array_banking-api_internal_dto.PaginationMeta":{"properties":{"limit":{"type":"integer"},"page":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"github_com_array_banking-api_internal_dto.RegisterRequest":{"properties":{"email":{"type":"string"},"firstName":{"maxLength":100,"minLength":1,"type":"string"},"lastName":{"maxLength":100,"minLength":1,"type":"string"},"password":{"minLength":12,"type":"string"}},"required":["email","firstName","lastName","password"],"type":"object"},"github_com_array_banking-api_internal_dto.SearchCustomersResponse":{"properties":{"customers":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.CustomerSearchResult"},"type":"array","uniqueItems":false},"limit":{"type":"integer"},"offset":{"type":"integer"},"total":{"type":"integer"},"total_pages":{"type":"integer"}},"type":"object"},"github_com_array_banking-api_internal_dto.TokenResponse":{"properties":{"accessToken":{"type":"string"},"expiresAt":{"type":"string"},"refreshToken":{"type":"string"},"tokenType":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.TransactionRequest":{"properties":{"amount":{"type":"string"},"description":{"maxLength":255,"minLength":1,"type":"string"},"type":{"enum":["credit","debit"],"type":"string"}},"required":["amount","description","type"],"type":"object"},"github_com_array_banking-api_internal_dto.TransactionWithBalance":{"properties":{"accountId":{"type":"string"},"amount":{"type":"string"},"category":{"type":"string"},"createdAt":{"type":"string"},"description":{"type":"string"},"id":{"type":"string"},"mccCode":{"type":"string"},"merchantName":{"type":"string"},"processedAt":{"type":"string"},"reference":{"type":"string"},"runningBalance":{"type":"string"},"status":{"type":"string"},"transactionType":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.TransferHistoryResponse":{"properties":{"pagination":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.PaginationMeta"},"transfers":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Transfer"},"type":"array","uniqueItems":false}},"type":"object"},"github_com_array_banking-api_internal_dto.TransferRequest":{"properties":{"amount":{"type":"string"},"description":{"maxLength":255,"minLength":1,"type":"string"},"toAccountId":{"type":"string"}},"required":["amount","description","toAccountId"],"type":"object"},"github_com_array_banking-api_internal_dto.TransferResponse":{"properties":{"amount":{"type":"string"},"creditTransactionId":{"type":"string"},"debitTransactionId":{"type":"string"},"fromAccountId":{"type":"string"},"message":{"type":"string"},"toAccountId":{"type":"string"},"transferId":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.UpdateAccountStatusRequest":{"properties":{"status":{"enum":["active","inactive","frozen","closed"],"type":"string"}},"required":["status"],"type":"object"},"github_com_array_banking-api_internal_dto.UpdateCustomerEmailRequest":{"properties":{"newEmail":{"type":"string"}},"required":["newEmail"],"type":"object"},"github_com_array_banking-api_internal_dto.UpdateCustomerEmailResponse":{"properties":{"message":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_dto.UpdateCustomerProfileRequest":{"properties":{"address":{"maxLength":500,"type":"string"},"city":{"maxLength":100,"type":"string"},"firstName":{"maxLength":100,"minLength":1,"type":"string"},"lastName":{"maxLength":100,"minLength":1,"type":"string"},"phoneNumber":{"type":"string"},"state":{"type":"string"},"zipCode":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_errors.ErrorDetail":{"properties":{"code":{"type":"string"},"details":{"items":{"type":"string"},"type":"array","uniqueItems":false},"message":{"type":"string"},"trace_id":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_errors.ErrorResponse":{"properties":{"error":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorDetail"}},"type":"object"},"github_com_array_banking-api_internal_models.Account":{"properties":{"account_number":{"type":"string"},"account_type":{"type":"string"},"balance":{"type":"number"},"closed_at":{"type":"string"},"created_at":{"type":"string"},"currency":{"type":"string"},"deleted_at":{"$ref":"#/components/schemas/gorm.DeletedAt"},"id":{"type":"string"},"interest_rate":{"type":"number"},"status":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_models.AuditLog":{"properties":{"action":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"ip_address":{"type":"string"},"metadata":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.JSONBMap"},"resource":{"type":"string"},"resource_id":{"type":"string"},"user_agent":{"type":"string"},"user_id":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_models.JSONBMap":{"additionalProperties":{},"description":"Map of string keys to arbitrary values","type":"object"},"github_com_array_banking-api_internal_models.Transaction":{"properties":{"account_id":{"type":"string"},"amount":{"type":"number"},"balance_after":{"type":"number"},"balance_before":{"type":"number"},"category":{"type":"string"},"created_at":{"type":"string"},"description":{"type":"string"},"id":{"type":"string"},"mcc_code":{"type":"string"},"merchant_name":{"type":"string"},"metadata":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.JSONBMap"},"pending_until":{"type":"string"},"processed_at":{"type":"string"},"processing_fee":{"type":"number"},"reference":{"type":"string"},"reversal_reference":{"type":"string"},"reversed_at":{"type":"string"},"status":{"type":"string"},"transaction_type":{"type":"string"},"updated_at":{"type":"string"},"version":{"type":"integer"}},"type":"object"},"github_com_array_banking-api_internal_models.Transfer":{"properties":{"amount":{"type":"number"},"completed_at":{"type":"string"},"created_at":{"type":"string"},"credit_transaction_id":{"type":"string"},"debit_transaction_id":{"type":"string"},"description":{"type":"string"},"error_message":{"type":"string"},"failed_at":{"type":"string"},"from_account_id":{"type":"string"},"id":{"type":"string"},"idempotency_key":{"type":"string"},"status":{"type":"string"},"to_account_id":{"type":"string"},"updated_at":{"type":"string"}},"type":"object"},"github_com_array_banking-api_internal_models.User":{"properties":{"created_at":{"type":"string"},"deleted_at":{"$ref":"#/components/schemas/gorm.DeletedAt"},"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"string"},"last_login_at":{"type":"string"},"last_name":{"type":"string"},"locked_at":{"type":"string"},"role":{"type":"string"},"updated_at":{"type":"string"}},"type":"object"},"gorm.DeletedAt":{"properties":{"time":{"type":"string"},"valid":{"description":"Valid is true if Time is not NULL","type":"boolean"}},"type":"object"},"internal_handlers.SuccessResponse":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"},"message":{"properties":{"message":{"type":"string"}},"type":"object"}},"securitySchemes":{"BearerAuth":{"description":"Type \"Bearer\" followed by a space and JWT token.","in":"header","name":"Authorization","type":"apiKey"}}},
    "info": {"description":"Production-quality banking REST API for developer assessment and interviewing. Provides core banking functionality including identity management, account operations, customer management, and transaction processing.","title":"Array Banking API","version":"1.0"},
    "externalDocs": {"description":"","url":""},
    "paths": {"/accounts":{"get":{"description":"Retrieve all bank accounts belonging to the authenticated user","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"type":"array"}}},"description":"List of user's accounts"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get all user accounts","tags":["Accounts"]},"post":{"description":"Create a new bank account (checking, savings, or money_market) with optional initial deposit","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.CreateAccountRequest"}}},"description":"Account creation details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.CreateAccountResponse"}}},"description":"Account created successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body or validation error"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"TRANSACTION_002 - Invalid initial deposit amount"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Create a new account","tags":["Accounts"]}},"/accounts/{accountId}":{"delete":{"description":"Permanently close an account. Account must have zero balance to be closed.","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"Account closed successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_003 - Invalid account ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_005 - Account has non-zero balance"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Close account","tags":["Accounts"]},"get":{"description":"Retrieve detailed information about a specific account belonging to the authenticated user","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"}}},"description":"Account details"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_003 - Invalid account ID format"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get account by ID","tags":["Accounts"]}},"/accounts/{accountId}/status":{"patch":{"description":"Update the status of an account (active, inactive, frozen, closed)","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.UpdateAccountStatusRequest"}}},"description":"New account status","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"}}},"description":"Updated account details"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body or account ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Update account status","tags":["Accounts"]}},"/accounts/{accountId}/transactions":{"get":{"description":"Retrieve paginated and filtered transaction history for a specific account with cursor-based pagination","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}},{"description":"Pagination cursor for next page","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Number of results per page (max 100)","in":"query","name":"limit","schema":{"default":20,"type":"integer"}},{"description":"Filter by start date (YYYY-MM-DD)","in":"query","name":"start_date","schema":{"type":"string"}},{"description":"Filter by end date (YYYY-MM-DD)","in":"query","name":"end_date","schema":{"type":"string"}},{"description":"Filter by transaction type","in":"query","name":"type","schema":{"enum":["credit","debit"],"type":"string"}},{"description":"Filter by status","in":"query","name":"status","schema":{"enum":["pending","completed","failed","reversed"],"type":"string"}},{"description":"Filter by category code","in":"query","name":"category","schema":{"type":"string"}},{"description":"Filter by minimum amount","in":"query","name":"min_amount","schema":{"type":"string"}},{"description":"Filter by maximum amount","in":"query","name":"max_amount","schema":{"type":"string"}},{"description":"Filter by merchant name","in":"query","name":"merchant","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.ListTransactionsResponse"}}},"description":"Transaction history with pagination"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid parameters or VALIDATION_003 - Invalid account ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"List transactions","tags":["Transactions"]},"post":{"description":"Create a new transaction (credit or debit) on an account","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransactionRequest"}}},"description":"Transaction details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Transaction"}}},"description":"Transaction created successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body or account ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"TRANSACTION_002 - Invalid transaction amount, TRANSACTION_003 - Insufficient funds, ACCOUNT_002 - Account not active"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Create a transaction","tags":["Accounts"]}},"/accounts/{accountId}/transactions/{id}":{"get":{"description":"Retrieve detailed information about a specific transaction including running balance","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}},{"description":"Transaction ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransactionWithBalance"}}},"description":"Transaction details with running balance"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid transaction or account ID format"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Transaction belongs to another user's account"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found or TRANSACTION_001 - Transaction not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get transaction by ID","tags":["Transactions"]}},"/accounts/{accountId}/transfer":{"post":{"description":"Perform an atomic transfer between user's accounts. Requires Idempotency-Key header. Both accounts must belong to the authenticated user.","parameters":[{"description":"Source Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}},{"description":"Unique key to ensure idempotent transfers","in":"header","name":"Idempotency-Key","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransferRequest"}}},"description":"Transfer details","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransferResponse"}}},"description":"Transfer completed successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body, VALIDATION_002 - Missing Idempotency-Key header"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Account belongs to another user"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Duplicate idempotency key with pending or failed transfer"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"TRANSACTION_002 - Invalid amount, TRANSACTION_003 - Insufficient funds, ACCOUNT_002 - Account not active"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Transfer between accounts","tags":["Accounts"]}},"/accounts/{accountId}/transfer-ownership":{"post":{"description":"Admin endpoint to transfer account ownership from one customer to another","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"from_customer_id":{"type":"string"},"to_customer_id":{"type":"string"}},"type":"object"}}},"description":"Transfer details","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"Ownership transferred successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_004 - Invalid account ID or VALIDATION_001 - Invalid request body"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found or CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Transfer account ownership (admin)","tags":["Customers"]}},"/admin/accounts":{"get":{"description":"Admin endpoint to retrieve all accounts with optional filters","parameters":[{"description":"Pagination offset","in":"query","name":"offset","schema":{"default":0,"type":"integer"}},{"description":"Number of results (max 100)","in":"query","name":"limit","schema":{"default":20,"type":"integer"}},{"description":"Filter by user ID (UUID)","in":"query","name":"user_id","schema":{"type":"string"}},{"description":"Filter by account type","in":"query","name":"account_type","schema":{"enum":["checking","savings","money_market"],"type":"string"}},{"description":"Filter by status","in":"query","name":"status","schema":{"enum":["active","inactive","frozen","closed"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"accounts":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"type":"array"},"limit":{"type":"integer"},"offset":{"type":"integer"},"total":{"type":"integer"}},"type":"object"}}},"description":"List of all accounts"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get all accounts (admin)","tags":["Admin"]}},"/admin/accounts/{accountId}":{"get":{"description":"Admin endpoint to retrieve any account by ID without ownership check","parameters":[{"description":"Account ID (UUID)","in":"path","name":"accountId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"}}},"description":"Account details"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_003 - Invalid account ID format"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_001 - Account not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get account by ID (admin)","tags":["Admin"]}},"/admin/users":{"get":{"description":"Admin endpoint to list all users with pagination","parameters":[{"description":"Page number","in":"query","name":"page","schema":{"default":1,"type":"integer"}},{"description":"Items per page (max 100)","in":"query","name":"limit","schema":{"default":20,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handlers.SuccessResponse"}}},"description":"Users retrieved successfully with pagination metadata"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid pagination parameters"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"List all users (admin)","tags":["Admin"]}},"/admin/users/{userId}":{"delete":{"description":"Admin endpoint to soft delete a user. Cannot delete own account.","parameters":[{"description":"User ID (UUID)","in":"path","name":"userId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handlers.SuccessResponse"}}},"description":"User deleted successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid user ID or cannot delete own account"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - User not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Delete user (admin)","tags":["Admin"]},"get":{"description":"Admin endpoint to retrieve detailed user information","parameters":[{"description":"User ID (UUID)","in":"path","name":"userId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handlers.SuccessResponse"}}},"description":"User retrieved successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid user ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - User not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get user by ID (admin)","tags":["Admin"]}},"/admin/users/{userId}/accounts":{"get":{"description":"Admin endpoint to retrieve all accounts for a specific user","parameters":[{"description":"User ID (UUID)","in":"path","name":"userId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"type":"array"}}},"description":"List of user's accounts"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_003 - Invalid user ID format"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get user accounts by user ID (admin)","tags":["Admin"]}},"/admin/users/{userId}/unlock":{"post":{"description":"Admin endpoint to unlock a locked user account","parameters":[{"description":"User ID (UUID)","in":"path","name":"userId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handlers.SuccessResponse"}}},"description":"User unlocked successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid user ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - User not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Unlock user account (admin)","tags":["Admin"]}},"/auth/login":{"post":{"description":"Authenticate user with email and password, receive JWT access and refresh tokens","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.LoginRequest"}}},"description":"Login credentials","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TokenResponse"}}},"description":"Login successful with JWT tokens"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Validation error - AUTH_001"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Invalid credentials - AUTH_002"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Account locked - AUTH_006"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"System error - SYSTEM_001 or SYSTEM_002"}},"summary":"Login user","tags":["Authentication"]}},"/auth/logout":{"post":{"description":"Invalidate user's access token and refresh token. Requires Bearer token in Authorization header.","responses":{"200":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"Logout successful"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Unauthorized - AUTH_004 or AUTH_005"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"System error - SYSTEM_001"}},"security":[{"BearerAuth":[]}],"summary":"Logout user","tags":["Authentication"]}},"/auth/refresh":{"post":{"description":"Get a new access token and refresh token pair using a valid refresh token","requestBody":{"content":{"application/json":{"schema":{"properties":{"refresh_token":{"type":"string"}},"type":"object"}}},"description":"Refresh token","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TokenResponse"}}},"description":"Token refreshed successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Validation error - AUTH_001"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Invalid refresh token - AUTH_003"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"System error - SYSTEM_001 or SYSTEM_002"}},"summary":"Refresh access token","tags":["Authentication"]}},"/auth/register":{"post":{"description":"Create a new user account with email, password, and personal information","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.RegisterRequest"}}},"description":"Registration details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"User created successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Validation error - AUTH_001 (Invalid request body)"},"409":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"Customer already exists - CUSTOMER_001"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"System error - SYSTEM_001 or SYSTEM_002"}},"summary":"Register a new user","tags":["Authentication"]}},"/customers":{"post":{"description":"Admin endpoint to create a new customer with auto-generated temporary password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.CreateCustomerRequest"}}},"description":"Customer details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.CreateCustomerResponse"}}},"description":"Customer created successfully with temporary password"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_002 - Email already exists"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Create customer (admin)","tags":["Customers"]}},"/customers/me":{"get":{"description":"Retrieve the authenticated customer's profile information","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.GetCustomerProfileResponse"}}},"description":"Customer profile"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get my profile","tags":["Customers"]}},"/customers/me/accounts":{"get":{"description":"Retrieve all accounts for the authenticated customer","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"accounts":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"type":"array"},"count":{"type":"integer"}},"type":"object"}}},"description":"Customer accounts"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get my accounts","tags":["Customers"]}},"/customers/me/activity":{"get":{"description":"Retrieve activity logs for the authenticated customer","parameters":[{"description":"Number of results","in":"query","name":"limit","schema":{"default":50,"type":"integer"}},{"description":"Pagination offset","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"activities":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.AuditLog"},"type":"array"},"limit":{"type":"integer"},"offset":{"type":"integer"},"total":{"type":"integer"}},"type":"object"}}},"description":"Customer activity logs"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get my activity","tags":["Customers"]}},"/customers/me/email":{"put":{"description":"Update the authenticated customer's email address","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.UpdateCustomerEmailRequest"}}},"description":"New email address","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.UpdateCustomerEmailResponse"}}},"description":"Email updated successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body or VALIDATION_005 - Invalid email format"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_002 - Email already exists"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Update my email","tags":["Customers"]}},"/customers/me/password":{"put":{"description":"Update the authenticated customer's password (requires current password)","requestBody":{"content":{"application/json":{"schema":{"properties":{"current_password":{"type":"string"},"new_password":{"type":"string"}},"type":"object"}}},"description":"Password update details","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"Password updated successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request body"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_001 - Current password is incorrect or AUTH_002 - Missing authentication"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Update my password","tags":["Customers"]}},"/customers/me/transfers":{"get":{"description":"Retrieve paginated transfer history for the authenticated user with optional status filter","parameters":[{"description":"Page number","in":"query","name":"page","schema":{"default":1,"type":"integer"}},{"description":"Results per page (max 100)","in":"query","name":"limit","schema":{"default":20,"type":"integer"}},{"description":"Filter by status","in":"query","name":"status","schema":{"enum":["completed","failed","pending"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.TransferHistoryResponse"}}},"description":"Transfer history with pagination"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get my transfer history","tags":["Customers"]}},"/customers/search":{"get":{"description":"Admin endpoint to search for customers by email, name, or account number","parameters":[{"description":"Search query","in":"query","name":"q","required":true,"schema":{"type":"string"}},{"description":"Search type","in":"query","name":"type","schema":{"default":"email","enum":["email","name","first_name","last_name","account_number"],"type":"string"}},{"description":"Results limit (max 1000)","in":"query","name":"limit","schema":{"default":10,"type":"integer"}},{"description":"Results offset","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.SearchCustomersResponse"}}},"description":"Customer search results"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"VALIDATION_001 - Invalid request parameters"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Search customers (admin)","tags":["Customers"]}},"/customers/{id}":{"delete":{"description":"Admin endpoint to soft-delete a customer. Cannot delete customers with non-zero account balances.","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.DeleteCustomerResponse"}}},"description":"Customer deleted successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"ACCOUNT_005 - Customer has non-zero balances"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Delete customer (admin)","tags":["Customers"]},"get":{"description":"Admin endpoint to retrieve detailed customer profile by customer ID","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.GetCustomerProfileResponse"}}},"description":"Customer profile"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID format"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get customer profile (admin)","tags":["Customers"]},"put":{"description":"Admin endpoint to update customer profile fields","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_dto.UpdateCustomerProfileRequest"}}},"description":"Profile updates","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/message"}],"properties":{"data":{"type":"object"},"message":{"type":"string"},"meta":{"type":"object"}},"type":"object"}}},"description":"Profile updated successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID or VALIDATION_001 - Invalid request body"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Update customer profile (admin)","tags":["Customers"]}},"/customers/{id}/accounts":{"get":{"description":"Admin endpoint to retrieve all accounts for a specific customer","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"accounts":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"type":"array"},"count":{"type":"integer"}},"type":"object"}}},"description":"Customer accounts"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get customer accounts (admin)","tags":["Customers"]},"post":{"description":"Admin endpoint to create a new account for a specific customer","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"properties":{"account_type":{"type":"string"}},"type":"object"}}},"description":"Account type (checking, savings, money_market)","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"properties":{"account":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.Account"},"message":{"type":"string"}},"type":"object"}}},"description":"Account created successfully"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID or VALIDATION_001 - Invalid request body"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Create account for customer (admin)","tags":["Customers"]}},"/customers/{id}/activity":{"get":{"description":"Admin endpoint to retrieve activity logs for a specific customer","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}},{"description":"Number of results","in":"query","name":"limit","schema":{"default":50,"type":"integer"}},{"description":"Pagination offset","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"activities":{"items":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_models.AuditLog"},"type":"array"},"limit":{"type":"integer"},"offset":{"type":"integer"},"total":{"type":"integer"}},"type":"object"}}},"description":"Customer activity logs"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Get customer activity (admin)","tags":["Customers"]}},"/customers/{id}/password/reset":{"put":{"description":"Admin endpoint to reset a customer's password and generate a temporary password","parameters":[{"description":"Customer ID (UUID)","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"message":{"type":"string"},"temporary_password":{"type":"string"}},"type":"object"}}},"description":"Password reset successfully with temporary password"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_004 - Invalid customer ID"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_002 - Missing or invalid authentication"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"AUTH_005 - Requires admin role"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"CUSTOMER_001 - Customer not found"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_001 - Internal server error"}},"security":[{"BearerAuth":[]}],"summary":"Reset customer password (admin)","tags":["Customers"]}},"/docs":{"get":{"description":"Serves the interactive Scalar documentation interface","responses":{"200":{"content":{"application/json":{"schema":{"type":"string"}},"text/html":{"schema":{"type":"string"}}},"description":"HTML page"}},"summary":"API Documentation UI","tags":["Documentation"]}},"/health":{"get":{"description":"Check API and database connectivity status","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"type":"string"},"time":{"type":"string"}},"type":"object"}}},"description":"Service is healthy"},"503":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_array_banking-api_internal_errors.ErrorResponse"}}},"description":"SYSTEM_003 - Service unavailable (database connection failed)"}},"summary":"Health check","tags":["Health"]}}},
    "openapi": "3.1.0"
}